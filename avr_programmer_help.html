<!DOCTYPE html>
<!-- saved from url=(0099)https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/ -->
<html lang="en" class="gr__andreasrohner_at"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=1000"><link type="text/css" rel="stylesheet" href="./avr_programmer_help_files/style.min.css"><title>How to fix device permissions for the USBasp programmer</title><link rel="icon" href="https://andreasrohner.at/cherry_tree.png" type="image/png"><meta property="og:type" content="website"><meta property="og:site_name" content="My Notebook"><meta property="og:image" content="/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/images/thumbnails/usbasp.jpg"><meta name="keywords" content="Arduino, USBasp, ISP, Linux, device permissions, udev rule, arch linux, Andreas Rohner"><meta name="author" content="Andreas Rohner"><meta name="description" content="How to fix device permissions for the USBasp programmer by adding a new udev rule"><link href="https://andreasrohner.at/feed.rss" rel="alternate" type="application/rss+xml" title="What&#39;s New on andreasrohner.at"></head><body class="language-javascript" data-gr-c-s-loaded="true"><header><canvas height="250" width="375"></canvas><canvas height="250" width="375"></canvas><h1>My Notebook</h1></header><nav><ul><li><a href="https://andreasrohner.at/">Home</a></li><li><a href="https://andreasrohner.at/posts/">Posts</a></li><li><ul class="defaultMenu"><li><a href="https://andreasrohner.at/posts/Electronics/">Electronics</a></li><li><ul class="defaultMenu"><li><a href="https://andreasrohner.at/posts/Programming/C%23/">C#</a></li><li><a href="https://andreasrohner.at/posts/Programming/Java/">Java</a></li></ul><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#">Programming</a></li><li><a href="https://andreasrohner.at/posts/Scripting/">Scripting</a></li><li><ul class="defaultMenu"><li><a href="https://andreasrohner.at/posts/Web%20Development/Gulp/">Gulp</a></li><li><a href="https://andreasrohner.at/posts/Web%20Development/JavaScript/">JavaScript</a></li></ul><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#">Web Development</a></li></ul><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#">Categories</a></li><li><ul class="defaultMenu"><li><a href="https://andreasrohner.at/articles/impressum/">Impressum</a></li><li><a href="https://andreasrohner.at/articles/privacy/">Privacy Policy</a></li><li><a href="https://andreasrohner.at/authors/Andreas%20Rohner">About Me</a></li></ul><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#">About</a></li></ul><form><input type="search" name="search"></form></nav><main><article itemprop="mainEntity" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 itemprop="headline">How to fix device permissions for the USBasp programmer</h2><dl><dt>Author</dt><dd itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="https://andreasrohner.at/authors/Andreas%20Rohner" itemprop="url" rel="author"><span itemprop="name">Andreas Rohner</span></a></dd><dt>Date</dt><dd><time datetime="2015-08-23T09:29:03.000Z" itemprop="datePublished">Sun Aug 23 2015</time></dd><dt>Category</dt><dd><a href="https://andreasrohner.at/posts/Electronics/">Electronics</a></dd></dl></header><section itemprop="articleBody"><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/images/usbasp.jpg"><img src="./avr_programmer_help_files/usbasp.jpg" itemprop="image" title="USBasp" alt="USBasp" class="floatingImage" style="width: 20em"></a><p>If you try to use the popular, open-hardware ISP programmer <a href="http://www.fischl.de/usbasp/">USBasp</a> in Linux as a regular non-privileged user, you get an error message like this:</p><pre class=" language-none"><code class=" language-none">avrdude: Warning: cannot open USB device: Permission denied
avrdude: error: could not find USB device with vid=0x16c0 pid=0x5dc vendor='www.fischl.de' product='USBasp'</code></pre><h3 id="quick_and_dirty_fix">Quick and Dirty Fix</h3><p>The problem is that the device permissions by default only allow root to write to the device. By using the command <code class=" language-path">lsusb</code> you can find out the bus and device id of your USBasp device:</p><pre class=" language-none"><code class=" language-none">$ lsusb
...
Bus 003 Device 018: ID 16c0:05dc Van Ooijen Technische Informatica shared ID for use with libusb
...
$ ls -al /dev/bus/usb/003/018
crw-rw-r-- 1 root root 189, 273 23. Aug 11:23 /dev/bus/usb/003/018</code></pre><p>The quick and dirty solution is to simply change the device permissions by hand. The downside of this is that you have to repeat this procedure every time you reconnect the device.</p><pre class=" language-none"><code class=" language-none">$ sudo chmod 666 /dev/bus/usb/003/018</code></pre><h3 id="permanent_solution">Permanent Solution</h3><p>The more sensible solution is to add a udev rule for the device. A udev rule simply matches certain properties of a device after it is connected and performs certain actions on it, like changing the file permissions.</p><p>The <a href="http://www.fischl.de/usbasp/usbasp.2011-05-28.tar.gz">firmware package</a> already contains a template for a udev rule in the directory <code class=" language-none">bin/linux-nonroot/99-USBasp.rules</code> and a small script to install it. The installation is trivial, because you just have to copy the <code class=" language-none">99-USBasp.rules</code> file to <code class=" language-none">/etc/udev/rules.d/</code>.</p><pre class=" language-none"><code class=" language-none">$ sudo cp 99-USBasp.rules /etc/udev/rules.d/</code></pre><h4 id="customizing_the_udev_rule">Customizing the udev rule</h4><p>The rule from the firmware package just sets the file permissions to 666, which is a bit crude. I wrote my own version of it for Arch Linux. In Arch Linux the group <code class=" language-none">uucp</code> is used for "Serial and USB devices such as modems, handhelds, RS-232/serial ports", so it makes sense to use it for the USBasp device.</p><pre class=" language-none"><code class=" language-none"># Set Group for USBasp
SUBSYSTEM=="usb", ATTR{idVendor}=="16c0", ATTR{idProduct}=="05dc", GROUP="uucp"</code></pre><p>You also have to add your user to that group. For this to take effect you have to log out and then log in again.</p><pre class=" language-none"><code class=" language-none">gpasswd -a youruser uucp</code></pre><p>Please note that the group is called <code class=" language-none">uucp</code> only in Arch Linux. Other distributions use a different group for the same thing. Ubuntu for example uses the group <code class=" language-none">dialout</code>.</p><h3 id="references">References</h3><ul><li>USBasp firmware - <a href="http://www.fischl.de/usbasp/">http://www.fischl.de/usbasp/</a></li></ul></section><footer><form name="commentForm" action="https://andreasrohner.at/comment.php" method="POST"><input type="hidden" name="uri" value="/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/">

<input type="text" name="name" placeholder="Name" maxlength="60" pattern="[A-Za-z-0-9_]+" required="">
<input type="number" name="captcha" placeholder="Captcha (5 + 5)" min="0" max="20" required="">
<textarea name="text" placeholder="Comment" maxlength="1200" required=""></textarea>

<input type="submit" value="Comment">
</form><section class="comment" itemprop="comment"><header>Posted on <time datetime="2016-06-28T14:56:10.000Z" itemprop="datePublished">Tue Jun 28 2016</time> by <em>ClausDurst</em></header>Thank you so much. This is one of the most useful trouble shooter I ever encountered on the net. It works fine with Manjaro 16.06 (Arch) and a Avr JTAGICE mkII programmer/debugger.</section><section class="comment" itemprop="comment"><header>Posted on <time datetime="2017-07-24T12:50:33.000Z" itemprop="datePublished">Mon Jul 24 2017</time> by <em>Panagiotis</em></header>Great stuff! Thanks a lot!</section></footer></article></main><aside><h3>Table of Contents</h3><ul><li class="selected"><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#quick_and_dirty_fix">Quick and Dirty Fix</a></li><li><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#permanent_solution">Permanent Solution</a><ul><li><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#customizing_the_udev_rule">Customizing the udev rule</a></li></ul></li><li><a href="https://andreasrohner.at/posts/Electronics/How-to-fix-device-permissions-for-the-USBasp-programmer/#references">References</a></li></ul><h3>Recent Posts</h3><ul><li><a href="https://andreasrohner.at/posts/Web%20Development/JavaScript/Random-starfield-generator-for-THREE-js/">Random starfield generator for THREE.js</a></li><li><a href="https://andreasrohner.at/posts/Programming/C%23/A-platform-independent-way-for-a-C%23-program-to-update-itself/">A platform independent way for a C# program to update itself</a></li><li><a href="https://andreasrohner.at/posts/Web%20Development/JavaScript/How-to-use-an-object-as-key-in-JavaScript/">How to use an object as a key in JavaScript</a></li><li><a href="https://andreasrohner.at/posts/Electronics/My-DIY-wireless-solar-powered-temperature-sensor-network/">My DIY wireless solar powered temperature sensor network</a></li></ul></aside><footer><p>Copyright Andreas Rohner</p></footer><script type="text/javascript" src="./avr_programmer_help_files/all.min.js"></script></body></html>
